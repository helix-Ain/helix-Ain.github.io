<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 爬取部分校园网资讯接口 · Helix</title><meta name="description" content="爬取部分校园网资讯接口 - Ain"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Helix"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/helix-Ain" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://blog.csdn.net/ainsnow" target="_blank" class="nav-list-link">CSDN</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">爬取部分校园网资讯接口</h1><div class="post-info">May 13, 2016</div><div class="post-content"><p>爬取校园资讯，教务信息，空教室查询接口<br><a id="more"></a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">/*</span></div><div class="line">* 五邑大学校园咨询</div><div class="line">* http://job.wyu.cn/morenews.php?keyvalue=classid&amp;keyword=通知公告</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWyuSms</span><span class="params">($page=<span class="number">1</span>)</span></span>&#123;</div><div class="line">    $content=file_get_contents(<span class="string">'http://job.wyu.cn/morenews.php?keyvalue=classid&amp;keyword=%E9%80%9A%E7%9F%A5%E5%85%AC%E5%91%8A&amp;page='</span>.$page);</div><div class="line">    $dom=<span class="keyword">new</span> simple_html_dom();</div><div class="line">    $dom-&gt;load($content);</div><div class="line">    $list=$dom-&gt;find(<span class="string">'.com-name'</span>);</div><div class="line">    $lis=$dom-&gt;find(<span class="string">'#page ul li'</span>,<span class="string">'1'</span>);</div><div class="line">    $maxPage=$lis-&gt;find(<span class="string">'span'</span>,<span class="number">1</span>)-&gt;plaintext;</div><div class="line">    <span class="keyword">foreach</span>($list <span class="keyword">as</span> $t)&#123;</div><div class="line">        $str=end(explode(<span class="string">'='</span>,$t-&gt;href));</div><div class="line">        $info=<span class="keyword">array</span>(</div><div class="line">        <span class="string">'id'</span>=&gt;$str,</div><div class="line">        <span class="string">'title'</span>=&gt;urlencode($t-&gt;plaintext)</div><div class="line">        );</div><div class="line">        $infoList[]=$info;</div><div class="line">    &#125;</div><div class="line">    $info=<span class="keyword">array</span>(</div><div class="line">    <span class="string">'code'</span>=&gt;<span class="number">0</span>,</div><div class="line">    <span class="string">'data'</span>=&gt;$infoList,</div><div class="line">    <span class="string">'currPage'</span>=&gt;$page,</div><div class="line">    <span class="string">'maxPage'</span>=&gt;$maxPage,</div><div class="line">    <span class="string">'desc'</span>=&gt;urlencode(<span class="string">'操作成功'</span>)</div><div class="line">    );</div><div class="line">    <span class="keyword">echo</span> urldecode(json_encode($info));</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line">* 得到校园资讯的详细信息</div><div class="line">* http://job.wyu.cn/shownews.php?modle=&amp;id=1691</div><div class="line">* <span class="doctag">@param</span> id 资讯id</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWyuSmsDetails</span><span class="params">($id)</span></span>&#123;</div><div class="line">    $content=file_get_contents(<span class="string">'http://job.wyu.cn/shownews.php?modle=&amp;id='</span>.$id);</div><div class="line">    $dom=<span class="keyword">new</span> simple_html_dom();</div><div class="line">    $dom-&gt;load($content);</div><div class="line">    $detailbox=$dom-&gt;find(<span class="string">'.detailbox'</span>,<span class="number">0</span>);</div><div class="line">    $info=<span class="keyword">array</span>(</div><div class="line">    <span class="string">'code'</span>=&gt;<span class="number">0</span>,</div><div class="line">    <span class="string">'detailed'</span>=&gt;urlencode(stringReplace($detailbox-&gt;plaintext)),</div><div class="line">    <span class="string">'desc'</span>=&gt;urlencode(<span class="string">'操作成功'</span>)</div><div class="line">    );</div><div class="line">    <span class="keyword">echo</span> urldecode(json_encode($info));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* 五邑大学教务公告列表</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWyuJw</span><span class="params">($page=<span class="number">1</span>)</span></span>&#123;</div><div class="line">    $mmc=memcache_init();</div><div class="line">    $info=$mmc==<span class="keyword">false</span>?<span class="keyword">false</span>:$mmc-&gt;get(<span class="string">'jw_list_'</span>.$page);</div><div class="line">    <span class="keyword">if</span>($info==<span class="keyword">false</span>)&#123;</div><div class="line">        $content=file_get_contents(<span class="string">'http://jwc.wyu.edu.cn/www/newslist.asp?id=51&amp;skey=&amp;pg='</span>.$page);</div><div class="line">        $dom=<span class="keyword">new</span> simple_html_dom();</div><div class="line">        $dom-&gt;load($content);</div><div class="line">        $maxPage=count($dom-&gt;find(<span class="string">'select option'</span>));</div><div class="line">        $as=$dom-&gt;find(<span class="string">'td[width=406] a'</span>);</div><div class="line">        $spans=$dom-&gt;find(<span class="string">'span.red'</span>);</div><div class="line">        <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;count($as);$i++)&#123;</div><div class="line">            $tmpStr=explode(<span class="string">'='</span>,$as[$i]-&gt;href);</div><div class="line">            $str=end($tmpStr);</div><div class="line">            $info=<span class="keyword">array</span>(</div><div class="line">            <span class="string">'id'</span>=&gt;$str,</div><div class="line">            <span class="string">'title'</span>=&gt;urlencode($as[$i]-&gt;plaintext),</div><div class="line">            <span class="string">'date'</span>=&gt;$spans[$i]-&gt;plaintext</div><div class="line">            );</div><div class="line">            $infoList[]=$info;</div><div class="line">        &#125;</div><div class="line">        $info=<span class="keyword">array</span>(</div><div class="line">        <span class="string">'code'</span>=&gt;<span class="number">0</span>,</div><div class="line">        <span class="string">'data'</span>=&gt;$infoList,</div><div class="line">        <span class="string">'currPage'</span>=&gt;$page,</div><div class="line">        <span class="string">'maxPage'</span>=&gt;$maxPage,</div><div class="line">        <span class="string">'desc'</span>=&gt;urlencode(<span class="string">'操作成功'</span>)</div><div class="line">        );</div><div class="line">        <span class="keyword">if</span>($mmc!=<span class="keyword">false</span>)&#123;</div><div class="line">            $mmc-&gt;set(<span class="string">'jw_list_'</span>.$page,$info,<span class="number">0</span>,<span class="number">1800</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    $mmc-&gt;close();</div><div class="line">    <span class="keyword">echo</span> urldecode(json_encode($info));</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line">* 得到教务公告的详细信息</div><div class="line">* http://jwc.wyu.edu.cn/www/jwcnews.asp?id=2078</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWyuJwDetails</span><span class="params">($id)</span></span>&#123;</div><div class="line">    $mmc=memcache_init();</div><div class="line">    $info=$mmc==<span class="keyword">false</span>?<span class="keyword">false</span>:$mmc-&gt;get(<span class="string">'jw_detail_'</span>.$id);</div><div class="line">    <span class="keyword">if</span>($info==<span class="keyword">false</span>)&#123;</div><div class="line">        $content=file_get_contents(<span class="string">'http://jwc.wyu.edu.cn/www/jwcnews.asp?id='</span>.$id);</div><div class="line">        $dom=<span class="keyword">new</span> simple_html_dom();</div><div class="line">        $dom-&gt;load($content);</div><div class="line">        $tbody=$dom-&gt;find(<span class="string">'td[height=536] table tbody'</span>,<span class="number">0</span>);</div><div class="line">        $info=<span class="keyword">array</span>(</div><div class="line">        <span class="string">'code'</span>=&gt;<span class="number">0</span>,</div><div class="line">        <span class="string">'detailed'</span>=&gt;urlencode(stringReplace($tbody-&gt;plaintext)),</div><div class="line">        <span class="string">'desc'</span>=&gt;urlencode(<span class="string">'操作成功'</span>)</div><div class="line">        );</div><div class="line">        <span class="keyword">if</span>($mmc!=<span class="keyword">false</span>)&#123;</div><div class="line">            $mmc-&gt;set(<span class="string">'jw_detail_'</span>.$id,$info,<span class="number">0</span>,<span class="number">1800</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    $mmc-&gt;close();</div><div class="line">    <span class="keyword">echo</span> urldecode(json_encode($info));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//--------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">/*</span></div><div class="line">* 五邑大学空课室查询</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">emptyClassroom</span><span class="params">($day=null,$week=null,$place=null)</span></span>&#123;</div><div class="line">    $url=<span class="string">'http://202.192.240.54/kkcx/Default.aspx'</span>;</div><div class="line">    $post=<span class="keyword">array</span>(</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$cbXQ'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$xq'</span>.$day=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$cbJC'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$jc1'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$jc2'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$jc3'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$jc4'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$jc5'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$cbZC'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$zc'</span>.$week=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$cbSKDD'</span>=&gt;<span class="string">'on'</span>,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$txtSKDD'</span>=&gt;$place,</div><div class="line">    <span class="string">'ctl00$ContentPlaceHolder1$Button1'</span>=&gt;<span class="string">'提交'</span>,</div><div class="line">    <span class="string">'__VIEWSTATE'</span>=&gt;<span class="string">'/wEPDwUJODA1MTU4MTc3D2QWAmYPZBYCAgMPZBYGAgEPDxYCHgRUZXh0BSEyMDE1LTIwMTblrablubQ8YnIgLz7nrKzkuIDlrabmnJ9kZAIDDzwrAAkCAA8WCB4NTmV2ZXJFeHBhbmRlZGQeC18hRGF0YUJvdW5kZx4MU2VsZWN0ZWROb2RlBRFjdGwwMF9UcmVlVmlldzF0MB4JTGFzdEluZGV4AghkCBQrAAIFAzA6MBQrAAIWDB8ABQzlvIDor77mn6Xor6IeC05hdmlnYXRlVXJsBRIva2tjeC9kZWZhdWx0LmFzcHgeCERhdGFQYXRoBRIva2tjeC9kZWZhdWx0LmFzcHgeCURhdGFCb3VuZGceCFNlbGVjdGVkZx4IRXhwYW5kZWRnFCsACAUbMDowLDA6MSwwOjIsMDozLDA6NCwwOjUsMDo2FCsAAhYKHwAFDOePree6p+ivvuihqB8FBQ8va2tjeC9iamtiLmFzcHgfBgUPL2trY3gvYmprYi5hc3B4HwdnHwlnZBQrAAIWCh8ABQzpmaLns7vlvIDor74fBQUPL2trY3gveXhray5hc3B4HwYFDy9ra2N4L3l4a2suYXNweB8HZx8JZ2QUKwACFgofAAUJ5YWs6YCJ6K++HwUFDi9ra2N4L2d4ay5hc3B4HwYFDi9ra2N4L2d4ay5hc3B4HwdnHwlnZBQrAAIWCh8ABQnpgJror4bor74fBQUOL2trY3gvdHNrLmFzcHgfBgUOL2trY3gvdHNrLmFzcHgfB2cfCWdkFCsAAhYKHwAFDOaooeeziuafpeivoh8FBQ8va2tjeC9taGN4LmFzcHgfBgUPL2trY3gvbWhjeC5hc3B4HwdnHwlnZBQrAAIWCh8ABRLor77nqIvpgInor77lkI3ljZUfBQUPL2trY3gveGttZC5hc3B4HwYFDy9ra2N4L3hrbWQuYXNweB8HZx8JZ2QUKwACFgofAAUY5o6S6K++5pWZ5a6k5Y2g55So56S65oSPHwUFCy9jbGFzc3Jvb20vHwYFCy9jbGFzc3Jvb20vHwdnHwlnZGQCBw9kFgQCAQ9kFgRmD2QWAmYPZBYCAgEPDxYCHwAFFeivt+mAieaLqeafpeivouadoeS7tmRkAgMPZBYCAgEPZBYCAgEPEA8WAh8CZ2QQFUkM5Lqn5ZOB6K6+6K6hG+eUteawlOW3peeoi+WPiuWFtuiHquWKqOWMlgznlLXlrZDllYbliqES55S15a2Q5L+h5oGv5bel56iLLeeUteWtkOS/oeaBr+W3peeoi++8iOWNiuWvvOS9k+e7v+iJsuWFiea6kO+8iSTnlLXlrZDkv6Hmga/lt6XnqIvvvIjlhYnnlLXlt6XnqIvvvIkk55S15a2Q5L+h5oGv5bel56iL77yI5L+h5oGv5a6J5YWo77yJDOWvueWkluaxieivrQbms5XlraYY5rOV5a2m77yI56S+5Lya5bel5L2c77yJDOe6uue7h+W3peeoiyTnurrnu4flt6XnqIvvvIjnurrnu4fmnI3oo4XotLjmmJPvvIkt57q657uH5bel56iL77yI57q657uH5YyW5a2m5LiO5riF5rSB55Sf5Lqn77yJJ+e6uue7h+W3peeoi++8iOe6uue7h+acuueUteS4gOS9k+WMlu+8iSrnurrnu4flt6XnqIvvvIjpnZ7nu4fpgKDmnZDmlpnkuI7lt6XnqIvvvIkY57q657uH5bel56iL77yI5p+T5pW077yJFeacjeijheiuvuiuoeS4juW3peeoizzmnI3oo4Xorr7orqHkuI7lt6XnqIvvvIjmnI3oo4XooajmvJTkuI7npL7kvJroiJ7ouYjmlZnogrLvvIkV5pyN6KOF5LiO5pyN6aWw6K6+6K6hDOW3peeoi+euoeeQhgzlt6XllYbnrqHnkIYe5bel5ZWG566h55CG77yI5peF5ri4566h55CG77yJDOW3peS4muiuvuiuoRXlm73pmYXnu4/mtY7kuI7otLjmmJMS5rGJ6K+t5Zu96ZmF5pWZ6IKyD+axieivreiogOaWh+WtphvmsYnor63oqIDmloflrabvvIjluIjojIPvvIkV5YyW5a2m5bel56iL5LiO5bel6Im6DOeOr+Wig+W3peeoiwznjq/looPorr7orqEe546v5aKD6K6+6K6h77yI5Lqn5ZOB6K6+6K6h77yJCeS8muiuoeWtphvkvJrorqHlrabvvIjlt6XnqIvpgKDku7fvvIkV5Lya6K6h5a2m77yI57K+566X77yJFeS8muiuoeWtpu+8iOWuoeiuoe+8iR7kvJrorqHlrabvvIjms6jlhozpgKDku7fluIjvvIkM5py65qKw5bel56iLGOacuuaisOW3peeoi+WPiuiHquWKqOWMlhjorqHnrpfmnLrnp5HlrabkuI7mioDmnK8J5bu6562R5a2mDOS6pOmAmuW3peeoiyHkuqTpgJrlt6XnqIvvvIjpgZPot6/kuI7moaXmooHvvIkq5Lqk6YCa5bel56iL77yI6L2o6YGT5Lqk6YCa6L2m6L6G5bel56iL77yJJ+S6pOmAmuW3peeoi++8iOi9qOmBk+S6pOmAmueUteawlOWMlu+8iSrkuqTpgJrlt6XnqIvvvIjovajpgZPkuqTpgJrov5DokKXnrqHnkIbvvIkn5Lqk6YCa5bel56iL77yI6L2o6YGT5Lqk6YCa6Ieq5Yqo5YyW77yJJ+S6pOmAmuW3peeoi++8iOS6pOmAmuaOp+WItuS4jueuoeeQhu+8iR7kuqTpgJrlt6XnqIvvvIjnianmtYHnrqHnkIbvvIkJ6YeR6J6N5a2mDOaXhea4uOeuoeeQhgbml6Xor60M6L2v5Lu25bel56iLDOWVhuWKoeiLseivrQznpL7kvJrlt6XkvZwM5biC5Zy66JCl6ZSAEuinhuinieS8oOi+vuiuvuiuoSHmlbDlrabkuI7lupTnlKjmlbDlrabvvIjluIjojIPvvIkM6YCa5L+h5bel56iLJ+mAmuS/oeW3peeoi++8iOiuoeeul+acuumAmuS/oee9kee7nO+8iSHpgJrkv6Hlt6XnqIvvvIjnianogZTnvZHlt6XnqIvvvIkM5Zyf5pyo5bel56iLDOe9kee7nOW3peeoixvoiJ7ouYjlrabvvIjnpL7kvJroiJ7ouYjvvIkb5L+h5oGv566h55CG5LiO5L+h5oGv57O757ufFeS/oeaBr+S4juiuoeeul+enkeWtpgzooYzmlL/nrqHnkIYM6Im65pyv6K6+6K6hHuiJuuacr+iuvuiuoe+8iOW5s+mdouiuvuiuoe+8iSToibrmnK/orr7orqHvvIjnpL7kvJroiJ7ouYjmlZnogrLvvIk25bqU55So5YyW5a2m77yI5Yac5Lqn5ZOB5a6J5YWo5qOA5rWL5LiO566h55CG5pa55ZCR77yJEuiLseivre+8iOe/u+ivke+8iRLoi7Hor63vvIjluIjojIPvvIkJ6Ieq5Yqo5YyWFUkM5Lqn5ZOB6K6+6K6hG+eUteawlOW3peeoi+WPiuWFtuiHquWKqOWMlgznlLXlrZDllYbliqES55S15a2Q5L+h5oGv5bel56iLLeeUteWtkOS/oeaBr+W3peeoi++8iOWNiuWvvOS9k+e7v+iJsuWFiea6kO+8iSTnlLXlrZDkv6Hmga/lt6XnqIvvvIjlhYnnlLXlt6XnqIvvvIkk55S15a2Q5L+h5oGv5bel56iL77yI5L+h5oGv5a6J5YWo77yJDOWvueWkluaxieivrQbms5XlraYY5rOV5a2m77yI56S+5Lya5bel5L2c77yJDOe6uue7h+W3peeoiyTnurrnu4flt6XnqIvvvIjnurrnu4fmnI3oo4XotLjmmJPvvIkt57q657uH5bel56iL77yI57q657uH5YyW5a2m5LiO5riF5rSB55Sf5Lqn77yJJ+e6uue7h+W3peeoi++8iOe6uue7h+acuueUteS4gOS9k+WMlu+8iSrnurrnu4flt6XnqIvvvIjpnZ7nu4fpgKDmnZDmlpnkuI7lt6XnqIvvvIkY57q657uH5bel56iL77yI5p+T5pW077yJFeacjeijheiuvuiuoeS4juW3peeoizzmnI3oo4Xorr7orqHkuI7lt6XnqIvvvIjmnI3oo4XooajmvJTkuI7npL7kvJroiJ7ouYjmlZnogrLvvIkV5pyN6KOF5LiO5pyN6aWw6K6+6K6hDOW3peeoi+euoeeQhgzlt6XllYbnrqHnkIYe5bel5ZWG566h55CG77yI5peF5ri4566h55CG77yJDOW3peS4muiuvuiuoRXlm73pmYXnu4/mtY7kuI7otLjmmJMS5rGJ6K+t5Zu96ZmF5pWZ6IKyD+axieivreiogOaWh+WtphvmsYnor63oqIDmloflrabvvIjluIjojIPvvIkV5YyW5a2m5bel56iL5LiO5bel6Im6DOeOr+Wig+W3peeoiwznjq/looPorr7orqEe546v5aKD6K6+6K6h77yI5Lqn5ZOB6K6+6K6h77yJCeS8muiuoeWtphvkvJrorqHlrabvvIjlt6XnqIvpgKDku7fvvIkV5Lya6K6h5a2m77yI57K+566X77yJFeS8muiuoeWtpu+8iOWuoeiuoe+8iR7kvJrorqHlrabvvIjms6jlhozpgKDku7fluIjvvIkM5py65qKw5bel56iLGOacuuaisOW3peeoi+WPiuiHquWKqOWMlhjorqHnrpfmnLrnp5HlrabkuI7mioDmnK8J5bu6562R5a2mDOS6pOmAmuW3peeoiyHkuqTpgJrlt6XnqIvvvIjpgZPot6/kuI7moaXmooHvvIkq5Lqk6YCa5bel56iL77yI6L2o6YGT5Lqk6YCa6L2m6L6G5bel56iL77yJJ+S6pOmAmuW3peeoi++8iOi9qOmBk+S6pOmAmueUteawlOWMlu+8iSrkuqTpgJrlt6XnqIvvvIjovajpgZPkuqTpgJrov5DokKXnrqHnkIbvvIkn5Lqk6YCa5bel56iL77yI6L2o6YGT5Lqk6YCa6Ieq5Yqo5YyW77yJJ+S6pOmAmuW3peeoi++8iOS6pOmAmuaOp+WItuS4jueuoeeQhu+8iR7kuqTpgJrlt6XnqIvvvIjnianmtYHnrqHnkIbvvIkJ6YeR6J6N5a2mDOaXhea4uOeuoeeQhgbml6Xor60M6L2v5Lu25bel56iLDOWVhuWKoeiLseivrQznpL7kvJrlt6XkvZwM5biC5Zy66JCl6ZSAEuinhuinieS8oOi+vuiuvuiuoSHmlbDlrabkuI7lupTnlKjmlbDlrabvvIjluIjojIPvvIkM6YCa5L+h5bel56iLJ+mAmuS/oeW3peeoi++8iOiuoeeul+acuumAmuS/oee9kee7nO+8iSHpgJrkv6Hlt6XnqIvvvIjnianogZTnvZHlt6XnqIvvvIkM5Zyf5pyo5bel56iLDOe9kee7nOW3peeoixvoiJ7ouYjlrabvvIjnpL7kvJroiJ7ouYjvvIkb5L+h5oGv566h55CG5LiO5L+h5oGv57O757ufFeS/oeaBr+S4juiuoeeul+enkeWtpgzooYzmlL/nrqHnkIYM6Im65pyv6K6+6K6hHuiJuuacr+iuvuiuoe+8iOW5s+mdouiuvuiuoe+8iSToibrmnK/orr7orqHvvIjnpL7kvJroiJ7ouYjmlZnogrLvvIk25bqU55So5YyW5a2m77yI5Yac5Lqn5ZOB5a6J5YWo5qOA5rWL5LiO566h55CG5pa55ZCR77yJEuiLseivre+8iOe/u+ivke+8iRLoi7Hor63vvIjluIjojIPvvIkJ6Ieq5Yqo5YyWFCsDSWdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dkZAIDDxYCHgdWaXNpYmxlaBYCZg9kFgJmD2QWBAIDDxQrAAJkZGQCBQ8UKwACZGRkGAMFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYoBQ9jdGwwMCRUcmVlVmlldzEFHmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkY2JYUQUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR4cTEFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkeHEyBR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHhxMwUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR4cTQFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkeHE1BR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHhxNgUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRjYkpDBR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGpjMQUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRqYzIFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkamMzBR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGpjNAUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRqYzUFHmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkY2JaQwUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzEFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemMyBR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjMwUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzQFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemM1BR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjNgUdY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzcFHWN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemM4BR1jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjOQUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzEwBR5jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjMTEFHmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemMxMgUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzEzBR5jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjMTQFHmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemMxNQUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzE2BR5jdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJHpjMTcFHmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkemMxOAUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSR6YzE5BSBjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGNiU0tCSgUeY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRjYlpZBSBjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGNiS0NESAUgY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRjYktDTUMFIGN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkY2JSS0xTBSBjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGNiU0tERAUlY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRMaXN0Vmlld1hLSA9nZAUlY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRMaXN0Vmlld1hLUQ9nZMDXsUmwHFRy3UvrcLpI0Fc4ELOQ'</span>,</div><div class="line">    <span class="string">'__EVENTVALIDATION'</span>=&gt;<span class="string">'/wEWdwLN7ZXgDQLQ4e3vDwKslYq7DwKplYq7DwKqlYq7DwKnlYq7DwKolYq7DwKllYq7DwK+4bXwDwLGr4nUCwLDr4nUCwLEr4nUCwLBr4nUCwLCr4nUCwLO4bXwDwL2wuanDgLzwuanDgL0wuanDgLxwuanDgLywuanDgLvwuanDgLwwuanDgLtwuanDgLuwuanDgL2wqamDgL2wqqmDgL2wq6mDgL2wrKmDgL2wpamDgL2wpqmDgL2wp6mDgL2wqKmDgL2wsamDgL2wsqmDgK9g636AQL1gKTJDQLO4Y3wDwLzlvPQDwKA9cLNCgL5xcVQAuaQyrgHAuvZuB4C07OGgQ0Cua/+aALqy7+rBQLFu9S+DQL3i9/UDgKJi9biCwK/raGmBQLwj4j1DQLfiLecBgKXhM7KCQKHhqjgDQK4guTFAgL1p4mlCAKFydvNDwKO6IbyDQKO6NKMDwKjz+SkDAKx+8ilCQLuqM+XBwLAi6/GBgKYoJuTDgLmi+XFCwKL/ZZzArzx5/AFAsu87L4OAsD8mRoCzOLMswkC5NXAjwoCx4G6oAgC+s+ToQkClf77hgYCiZiq8QoCn4XWnAMCiarhlg0CrNyMSAKj68K3AQLXlo3RAQLG4b6NDQKZ4MnXCALik9fvBwKv3u/PBwLUqI+BBgKKlZTUDwK1zt/SDgLuuMrSDAKVqfC6CAL86JXjBALhwu7GDQKNhPa2BALBnt/QAQLXw8qbCgKK9pzPAgLptuHrBALbxL3iBQKE34qtBQLsuIqtCgKui7riCwL3tLahDwKgivWcAwLLn5a7BwLnnaiLDAKUmP7rDAKXn7nwDwLnyJjdCwKk6sSNBAL5xpvcDwKHt5+CCwKMq9q6CAKDjLLEAwLLysrVDQKQ2dm5BgLEytbTCgLCwtecBQLcgMChAwKbjKKxBgLngPySDAKA4sljR1y/S5FwNj4B9MuGfKqBSZ/tvrY='</span></div><div class="line">    );</div><div class="line">    $curl=curl_init();</div><div class="line">    curl_setopt($curl,CURLOPT_URL,$url);</div><div class="line">    curl_setopt($curl,CURLOPT_RETURNTRANSFER,<span class="number">1</span>);</div><div class="line">    curl_setopt($curl,CURLOPT_POST,<span class="number">1</span>);</div><div class="line">    curl_setopt($curl,CURLOPT_POSTFIELDS,http_build_query($post));</div><div class="line">    $content=curl_exec($curl);</div><div class="line">    curl_close($curl);</div><div class="line">    $dom=<span class="keyword">new</span> simple_html_dom();</div><div class="line">    $dom-&gt;load($content);</div><div class="line">    $trs=$dom-&gt;find(<span class="string">'#ctl00_ContentPlaceHolder1_ListViewXKH_itemPlaceholderContainer tbody tr'</span>);</div><div class="line">    <span class="keyword">for</span>($i=<span class="number">1</span>;$i&lt;count($trs);$i++)&#123;</div><div class="line">        $tds=$trs[$i]-&gt;find(<span class="string">'td'</span>);</div><div class="line">        $info=<span class="keyword">array</span>(</div><div class="line">        <span class="string">'kaikehao'</span>=&gt;urlencode($tds[<span class="number">0</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'kechengsheji'</span>=&gt;urlencode($tds[<span class="number">1</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'kelei'</span>=&gt;urlencode($tds[<span class="number">2</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'xuefen'</span>=&gt;urlencode($tds[<span class="number">3</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'shangkebanji'</span>=&gt;urlencode($tds[<span class="number">5</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'shangkeshijian'</span>=&gt;urlencode($tds[<span class="number">6</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'shangkedidian'</span>=&gt;urlencode($tds[<span class="number">7</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext),</div><div class="line">        <span class="string">'renkelaoshi'</span>=&gt;urlencode($tds[<span class="number">8</span>]-&gt;find(<span class="string">'span'</span>,<span class="number">0</span>)-&gt;plaintext)</div><div class="line">        );</div><div class="line">        $data[]=$info;</div><div class="line">    &#125;</div><div class="line">    $info=<span class="keyword">array</span>(</div><div class="line">    <span class="string">'code'</span>=&gt;<span class="number">0</span>,</div><div class="line">    <span class="string">'data'</span>=&gt;$data,</div><div class="line">    <span class="string">'desc'</span>=&gt;urlencode(<span class="string">'操作成功'</span>)</div><div class="line">    );</div><div class="line">    <span class="keyword">echo</span> urldecode(json_encode($info));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringReplace</span><span class="params">($str)</span></span>&#123;</div><div class="line">    $newstr = str_ireplace(<span class="string">'"'</span>,<span class="string">'\''</span>,$str);</div><div class="line">    $replace = <span class="keyword">array</span>(<span class="string">" "</span>, <span class="string">"\r"</span>, <span class="string">"\n"</span>, <span class="string">"\t"</span>);</div><div class="line">    <span class="keyword">return</span> str_replace($replace,<span class="string">''</span>, $newstr);</div><div class="line">&#125;</div></pre></td></tr></table></figure></div></article></div></section><footer><div class="paginator"><a href="/2016/06/22/PHP压缩文件/" class="prev">PREV</a><a href="/2016/03/11/对easyui-combobox针对业务的简单封装/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2016/05/13/爬取部分校园网资讯接口/';
var disqus_title = '爬取部分校园网资讯接口';
var disqus_url = 'http://yoursite.com/2016/05/13/爬取部分校园网资讯接口/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com">Ain</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>